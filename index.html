<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LOZEE 시작하기</title>
    <link href="https://fonts.googleapis.com/css2?family=KoPub+World+Dotum:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* (기존 스타일 그대로 유지) */
    </style>
</head>
<body id="introBody" class="step-background-main">
    <!-- 스텝 레이아웃 (기존 그대로) -->

    <!-- <script type="module"> 시작 -->
    <script type="module">
    // static import로 모듈을 한 번에 로드
    import { counselingTopicsByAge } from './js/counseling_topics.js';
    import { playTTSFromText }   from './js/tts.js';

    // 변수 선언 (import로 초기화된 변수만 사용)
    let counselingTopicsLoaded = true;

    // DOM 요소 바인딩 (기존 코드)
    const introBody          = document.getElementById('introBody');
    const stepCBT            = document.getElementById('stepCBT');
    // … 기타 스텝 요소들 …

    // 초기화 함수
    async function initializeApp() {
        try {
            // TTS는 이미 static import로 로드됨
            if (typeof playTTSFromText !== 'function') throw new Error();
            console.log('TTS 로드 완료');
        } catch (e) {
            console.warn('TTS 로드 실패, mock 사용', e);
            playTTSFromText = async (text) => { console.log('[MOCK TTS]', text); };
        }
        populateAgeOptions();
        showStep(0);
    }

    // 상담 주제 로드 (이미 static import)
    function loadCounselingTopics() {
        counselingTopicsLoaded = true;
        return;
    }

    // 나이별 주제 가져오기
    function getTopicsForAge(age) {
        if (!counselingTopicsLoaded) return ['주제 로딩 중...'];
        // … 기존 로직 그대로 …
        const ageInt = parseInt(age, 10);
        let key;
        if (ageInt >= 8 && ageInt <= 10) key = '8-10';
        else if (ageInt >= 11 && ageInt <= 15) key = '12-15';
        else key = '30+';
        return counselingTopicsByAge[key] || [];
    }

    // UI 로직 및 핸들러 (기존 그대로)
    // …

    // 페이로드: DOMContentLoaded → initialize
    document.addEventListener('DOMContentLoaded', initializeApp);
    </script>
    <!-- </script> 끝 -->
</body>
</html>
