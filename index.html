### index.html
```html
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LOZEE ì‹œì‘í•˜ê¸°</title>
  <link
    href="https://fonts.googleapis.com/css2?family=KoPub+World+Dotum:wght@400;700&display=swap"
    rel="stylesheet"
  />
  <style>
    body,
    html {
      margin: 0;
      padding: 0;
      font-family: 'KoPub World Dotum', sans-serif;
      height: 100%;
      overflow: hidden;
    }
    .step {
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 20px;
      box-sizing: border-box;
      text-align: center;
      height: 100vh;
      width: 100vw;
      position: absolute;
      top: 0;
      left: 0;
    }
    .step.active {
      display: flex;
    }
    .step-background-main {
      background: linear-gradient(135deg, #6078ea, #a777e3);
      color: #fff;
    }
    .error-message {
      font-weight: bold;
      font-size: 0.9em;
      min-height: 1.2em;
      margin-top: -5px;
      margin-bottom: 5px;
      line-height: 1.2;
      padding: 0 5px;
    }
    .error-message:empty {
      display: none;
    }
    input,
    select {
      padding: 12px;
      margin-bottom: 12px;
      border: 1px solid #bdbdbd;
      border-radius: 8px;
      width: 85%;
      max-width: 350px;
      font-size: 1em;
      background: #fdfdfd;
    }
    select {
      padding-right: 30px;
    }
    button {
      padding: 13px 28px;
      background: #fff;
      color: #6e8efb;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      font-weight: bold;
      font-size: 1.05em;
      margin-top: 20px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
      transition: 0.2s;
    }
    button:hover {
      background: #f5f5f5;
      transform: translateY(-2px);
    }
    button:disabled {
      background: #e0e0e0;
      color: #9e9e9e;
      cursor: not-allowed;
    }
    .options-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin-bottom: 20px;
      max-width: 480px;
    }
    .options-container button {
      background: rgba(255, 255, 255, 0.2);
      color: #fff;
      border: 1px solid rgba(255, 255, 255, 0.5);
      padding: 10px 15px;
      border-radius: 20px;
      font-size: 0.9em;
      cursor: pointer;
      transition: 0.2s;
    }
    .options-container button.selected,
    .options-container button:hover {
      background: #fff;
      color: #6078ea;
      transform: translateY(-1px) scale(1.03);
    }
    .navigation-buttons {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin-top: 15px;
    }
    .navigation-buttons button {
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.3);
      color: #f0f0f0;
      padding: 10px 20px;
    }
    .navigation-buttons button:hover {
      background: rgba(255, 255, 255, 0.2);
      color: #fff;
      transform: translateY(-1px);
    }
    .secondary-button {
      background: transparent;
      border: 1px solid #d1c4e9;
      color: #d1c4e9;
    }
    .secondary-button:hover {
      background: rgba(255, 255, 255, 0.1);
      color: #fff;
      border-color: #ede7f6;
    }
  </style>
</head>
<body class="step-background-main">
  <!-- ìŠ¤í… 1: ì´ë©”ì¼ -->
  <div id="stepCBT" class="step active">
    <h2>ë¡œì§€ì™€ ëŒ€í™” ì‹œì‘í•˜ê¸°</h2>
    <p>CBT ì°¸ì—¬ì ì´ë©”ì¼ ì£¼ì†Œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.</p>
    <input type="email" id="cbtCodeInput" placeholder="CBT ì´ë©”ì¼ ì£¼ì†Œ" />
    <div class="error-message" id="cbtCodeError"></div>
    <button id="submitCbtCodeBtn">ë‹¤ìŒ</button>
  </div>

  <!-- ìŠ¤í… 2: ì´ë¦„/ë‚˜ì´ -->
  <div id="stepNameAge" class="step">
    <h2>ë§Œë‚˜ì„œ ë°˜ê°€ì›Œìš”!</h2>
    <p>ë¡œì§€ê°€ ë‹¹ì‹ ì„ ì–´ë–»ê²Œ ë¶€ë¥´ë©´ ì¢‹ì„ê¹Œìš”?</p>
    <input type="text" id="nameInput" placeholder="ì´ë¦„ ë˜ëŠ” ë³„ëª…" />
    <div class="error-message" id="nameError"></div>
    <p style="margin-top:20px;">ë‚˜ì´ë¥¼ ì•Œë ¤ì£¼ì„¸ìš”.</p>
    <select id="ageSelectInput">
      <option value="">ë‚˜ì´ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</option>
    </select>
    <div class="error-message" id="ageError"></div>
    <button id="submitNameAgeBtn">ë‹¤ìŒ</button>
  </div>

  <!-- ìŠ¤í… 3: ì§„ë‹¨ -->
  <div id="stepDiagnosis" class="step">
    <h2>ê°€ì§€ê³  ìˆëŠ” ì–´ë ¤ì›€ì´ ìˆë‹¤ë©´ ì•Œë ¤ì£¼ì„¸ìš”.</h2>
    <p style="color:#e0e0e0; font-size:0.9em; margin-bottom:10px;">
      ë¡œì§€ê°€ ë‹¹ì‹ ì„ ë” ì˜ ì´í•´í•˜ëŠ” ë° ë„ì›€ì´ ë  ìˆ˜ ìˆì–´ìš”.<br />
      ì„ íƒí•˜ì§€ ì•Šì•„ë„ ê´œì°®ì•„ìš”.
    </p>
    <div id="diagnosisSelection" class="options-container"></div>
    <div class="error-message" id="diagnosisError"></div>
    <button id="submitDiagnosisBtn">ë‹¤ìŒ</button>
  </div>

  <!-- ìŠ¤í… 4: ì•± ì†Œê°œ -->
  <div id="stepLozeeIntro" class="step">
    <h2>LOZEE ì´ì•¼ê¸°</h2>
    <p style="color:#f5f5f5; line-height:1.9; font-size:1.05em; max-width:450px; text-align:left;">
      <strong>L = Logic</strong> (ë…¼ë¦¬ì  ì‚¬ê³ )<br />
      <strong>O = Observation</strong> (ê´€ì°°ê³¼ ì´í•´)<br />
      <strong>Z = Zest</strong> (ê°ì •ì˜ ìƒë™ê°)<br />
      <strong>E = Expression</strong> (í‘œí˜„í•˜ê¸°)<br />
      <strong>E = Empathy</strong> (ê³µê°í•˜ê¸°)
    </p>
    <button id="confirmLozeeIntroBtn">í™•ì¸</button>
  </div>

  <!-- ìŠ¤í… 5: ì£¼ì œ ì„ íƒ -->
  <div id="stepTopic" class="step">
    <h2 id="topicStepTitle">ì–´ë–¤ ì¢…ë¥˜ì˜ ì´ì•¼ê¸°ë¥¼ í•˜ê³  ì‹¶ë‹ˆ?</h2>
    <p id="topicStepDescription">
      <span id="topicUserAgeInfo"></span> ì¹œêµ¬ì•¼, ì–´ë–¤ ì´ì•¼ê¸°ê°€ ë„¤ ë§ˆìŒì„ ë‹¹ê¸°ë‹ˆ?<br />ê³¨ë¼ë´!
    </p>

    <!-- ëŒ€ë¶„ë¥˜ ë²„íŠ¼ -->
    <div id="topicCategorySelection" class="options-container"></div>

    <!-- ì†Œë¶„ë¥˜ + í˜ì´ì§• -->
    <div id="subTopicSelectionContainer" style="display:none;">
      <div id="subTopicButtons" class="options-container"></div>
      <div class="navigation-buttons">
        <button id="moreTopicsBtn" style="display:none;">ë‹¤ë¥¸ ì´ì•¼ê¸° ë” ë³´ê¸°</button>
        <button id="backToCategoriesBtn">ë‹¤ë¥¸ ì¢…ë¥˜ ì´ì•¼ê¸° ê³ ë¥¼ë˜</button>
      </div>
    </div>

    <!-- ì§ì ‘/ëœë¤ ì„ íƒ -->
    <div class="navigation-buttons" style="margin-top:20px;">
      <button id="noSpecificTopicBtn" class="secondary-button">ì—¬ê¸´ ì—†ì–´ìš” (ì§ì ‘ ë§í• ë˜ìš”)</button>
      <button id="lozeePickBtn" class="secondary-button">ë¡œì§€ì•¼ ê³¨ë¼ì¤˜!</button>
    </div>

    <div class="error-message" id="topicOverallError"></div>
  </div>

  <script type="module">
    import { counselingTopicsByAge } from './js/counseling_topics.js';
    import { validateCbtEmail, getCbtErrorMessage } from './js/cbt.js';

    // DOM ìš”ì†Œ ì°¸ì¡°
    const stepCBT = document.getElementById('stepCBT');
    const stepNameAge = document.getElementById('stepNameAge');
    const stepDiagnosis = document.getElementById('stepDiagnosis');
    const stepLozeeIntro = document.getElementById('stepLozeeIntro');
    const stepTopic = document.getElementById('stepTopic');

    const cbtCodeInput = document.getElementById('cbtCodeInput');
    const cbtCodeError = document.getElementById('cbtCodeError');
    const submitCbtCodeBtn = document.getElementById('submitCbtCodeBtn');

    const nameInput = document.getElementById('nameInput');
    const nameError = document.getElementById('nameError');
    const ageSelectInput = document.getElementById('ageSelectInput');
    const ageError = document.getElementById('ageError');
    const submitNameAgeBtn = document.getElementById('submitNameAgeBtn');

    const diagnosisSelection = document.getElementById('diagnosisSelection');
    const diagnosisError = document.getElementById('diagnosisError');
    const submitDiagnosisBtn = document.getElementById('submitDiagnosisBtn');

    const confirmLozeeIntroBtn = document.getElementById('confirmLozeeIntroBtn');

    const topicCategorySelection = document.getElementById('topicCategorySelection');
    const subTopicSelectionContainer = document.getElementById('subTopicSelectionContainer');
    const subTopicButtons = document.getElementById('subTopicButtons');
    const moreTopicsBtn = document.getElementById('moreTopicsBtn');
    const backToCategoriesBtn = document.getElementById('backToCategoriesBtn');
    const noSpecificTopicBtn = document.getElementById('noSpecificTopicBtn');
    const lozeePickBtn = document.getElementById('lozeePickBtn');
    const topicStepTitle = document.getElementById('topicStepTitle');
    const topicStepDescription = document.getElementById('topicStepDescription');
    const topicOverallError = document.getElementById('topicOverallError');

    // ìŠ¤í… ê´€ë¦¬
    const steps = [stepCBT, stepNameAge, stepDiagnosis, stepLozeeIntro, stepTopic];
    function showStep(idx) {
      steps.forEach((s, i) => s.classList.toggle('active', i === idx));
    }

    // TTS ëª¨í‚¹
    const playTTS = (txt) => console.log('[TTS]', txt);

    // ë‚˜ì´ ì˜µì…˜
    function populateAgeOptions() {
      for (let i = 5; i <= 90; i++) {
        const opt = document.createElement('option');
        opt.value = i;
        opt.textContent = `${i}ì„¸`;
        ageSelectInput.appendChild(opt);
      }
    }

    // ì§„ë‹¨ ì˜µì…˜
    const diagnosisOptions = [
      { id: 'adhd', text: 'ADHD' },
      { id: 'asd', text: 'ASD' },
      { id: 'asperger', text: 'ASD(ì•„ìŠ¤í¼ê±°ì¦í›„êµ°)' },
      { id: 'social_comm_disorder', text: 'ì‚¬íšŒì ì˜ì‚¬ì†Œí†µì¥ì• ' },
      { id: '2e', text: 'Audhd' },
      { id: 'borderline_intel', text: 'ê²½ê³„ì„ ì§€ëŠ¥' },
      { id: 'developmental_dis', text: 'ë°œë‹¬ì¥ì• ' },
      { id: 'language_delay', text: 'ì–¸ì–´ì§€ì—°' },
      { id: 'none', text: 'ì§„ë‹¨ë°›ì€ ê²ƒ ì—†ì–´', exclusive: true },
      { id: 'prefer_not_to_say', text: 'ì§€ê¸ˆì€ ì„ íƒ ì•ˆí• ë˜', exclusive: true }
    ];
    function populateDiagnosisOptions() {
      diagnosisSelection.innerHTML = '';
      diagnosisOptions.forEach((d) => {
        const b = document.createElement('button');
        b.textContent = d.text;
        b.dataset.id = d.id;
        if (d.exclusive) b.dataset.exclusive = 'true';
        b.onclick = () => {
          b.classList.toggle('selected');
          if (b.classList.contains('selected') && d.exclusive) {
            diagnosisSelection.querySelectorAll('button').forEach((x) => { if (x !== b) x.classList.remove('selected'); });
          } else if (b.classList.contains('selected')) {
            diagnosisSelection.querySelectorAll('button[data-exclusive]').forEach((x) => x.classList.remove('selected'));
          }
        };
        diagnosisSelection.appendChild(b);
      });
    }

    // ì´ë©”ì¼
    submitCbtCodeBtn.onclick = () => {
      const email = cbtCodeInput.value.trim();
      if (!validateCbtEmail(email)) {
        cbtCodeError.textContent = getCbtErrorMessage();
        playTTS(getCbtErrorMessage());
        return;
      }
      localStorage.setItem('cbtUserEmail', email);
      localStorage.setItem('cbtVerified', 'true');
      playTTS('ì´ë©”ì¼ì´ í™•ì¸ë˜ì—ˆì–´ìš”. ì´ë¦„ê³¼ ë‚˜ì´ë¥¼ ì•Œë ¤ì£¼ì„¸ìš”.');
      showStep(1);
    };

    // ì´ë¦„/ë‚˜ì´
    submitNameAgeBtn.onclick = () => {
      const name = nameInput.value.trim();
      const age = ageSelectInput.value;
      if (!name) {
        nameError.textContent = 'ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.';
        playTTS('ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }
      if (!age) {
        ageError.textContent = 'ë‚˜ì´ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.';
        playTTS('ë‚˜ì´ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
        return;
      }
      localStorage.setItem('lozee_username', name);
      localStorage.setItem('lozee_userage', age);
      playTTS('ì¢‹ì•„ìš”. ì–´ë ¤ì›€ì´ ìˆë‹¤ë©´ ì„ íƒí•´ì£¼ì„¸ìš”.');
      showStep(2);
    };

    // ì§„ë‹¨
    submitDiagnosisBtn.onclick = () => {
      const selected = Array.from(diagnosisSelection.querySelectorAll('button.selected')).map((b) => b.dataset.id);
      localStorage.setItem('lozee_userdisease', JSON.stringify(selected));
      const target = ['adhd', 'asd', 'asperger', 'social_comm_disorder', '2e'];
      const hasSpec = selected.some((id) => target.includes(id));
      if (hasSpec) {
        playTTS('ì–´ë–¤ ì¢…ë¥˜ì˜ ì´ì•¼ê¸°ë¥¼ ê³ ë¥¼ê¹Œìš”?');
        renderTopicCategories(localStorage.getItem('lozee_userage'));
        showStep(4);
      } else {
        playTTS('ê°„ë‹¨íˆ ì•ˆë‚´ í›„ ëŒ€í™” ì‹œì‘í•©ë‹ˆë‹¤.');
        showStep(3);
      }
    };

    // ì•± ì†Œê°œ
    confirmLozeeIntroBtn.onclick = () => {
      playTTS('ëŒ€í™”ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤.');
      proceedToDialog({});
    };

    // ì£¼ì œ ì„ íƒ ë¡œì§
    function getAgeKey(age) {
      const a = parseInt(age, 10);
      if (a >= 8 && a <= 10) return '8-10';
      if (a >= 11 && a <= 15) return '11-15';
      return '30+';
    }
    function getTopicDataForAge(age) {
      const key = getAgeKey(age);
      return counselingTopicsByAge[key] || {};
    }
    let currentTopicCategoryKey = null;
    let currentSubTopics = [];
    let displayedSubTopicCount = 0;
    const SUB_TOPICS_PER_PAGE = 6;

    function renderTopicCategories(age) {
      topicCategorySelection.innerHTML = '';
      subTopicSelectionContainer.style.display = 'none';
      topicCategorySelection.style.display = 'flex';
      const data = getTopicDataForAge(age);
      Object.keys(data).forEach((cat) => {
        const btn = document.createElement('button');
        const icon = data[cat][0]?.icon || 'ğŸ“';
        btn.innerHTML = `${icon} ${cat}`;
        btn.onclick = () => {
          currentTopicCategoryKey = cat;
          displayedSubTopicCount = 0;
          topicStepTitle.textContent = `"${cat}"ì— ëŒ€í•´ ë” ê³¨ë¼ë³¼ê¹Œ?`;
          topicStepDescription.textContent = 'ì•„ë˜ì—ì„œ ì„¸ë¶€ ì£¼ì œë¥¼ ê³¨ë¼ë´.';
          renderSubTopics();
          topicCategorySelection.style.display = 'none';
          subTopicSelectionContainer.style.display = 'flex';
          playTTS(`${cat} ì£¼ì œë¡œ ì„ íƒí–ˆì–´ìš”. ì„¸ë¶€ ì£¼ì œë¥¼ ê³¨ë¼ì£¼ì„¸ìš”.`);
        };
        topicCategorySelection.appendChild(btn);
      });
    }

    function renderSubTopics() {
      subTopicButtons.innerHTML = '';
      const data = getTopicDataForAge(localStorage.getItem('lozee_userage'));
      currentSubTopics = data[currentTopicCategoryKey] || [];
      const slice = currentSubTopics.slice(displayedSubTopicCount, displayedSubTopicCount + SUB_TOPICS_PER_PAGE);
      slice.forEach((t) => {
        const btn = document.createElement('button');
        btn.className = 'sub-topic-btn';
        btn.innerHTML = `${t.icon} ${t.displayText}`;
        btn.onclick = () => {
          localStorage.setItem('selectedTopic', JSON.stringify(t));
          playTTS(`${t.displayText} ì£¼ì œë¡œ ì„ íƒí–ˆì–´ìš”.`);
          proceedToDialog({ topic: t });
        };
        subTopicButtons.appendChild(btn);
      });
      displayedSubTopicCount += slice.length;
      moreTopicsBtn.style.display = displayedSubTopicCount < currentSubTopics.length ? 'inline-block' : 'none';
    }
    moreTopicsBtn.onclick = renderSubTopics;
    backToCategoriesBtn.onclick = () => renderTopicCategories(localStorage.getItem('lozee_userage'));
    noSpecificTopicBtn.onclick = () => {
      const t = { displayText: 'ì§ì ‘ ì…ë ¥', icon: 'ğŸ’¬', tags: ['user_defined'] };
      localStorage.setItem('selectedTopic', JSON.stringify(t));
      playTTS('ì§ì ‘ ì…ë ¥ ì£¼ì œë¡œ ì´ë™í•©ë‹ˆë‹¤.');
      proceedToDialog({ topic: t });
    };
    lozeePickBtn.onclick = () => {
      const data = counselingTopicsByAge[getAgeKey(localStorage.getItem('lozee_userage'))];
      const all = Object.values(data).flat();
      const pick = all[Math.floor(Math.random() * all.length)];
      localStorage.setItem('selectedTopic', JSON.stringify(pick));
      playTTS(`${pick.displayText} ì£¼ì œë¡œ ê³¨ëì–´ìš”.`);
      proceedToDialog({ topic: pick });
    };

    function proceedToDialog(data) {
      window.location.href = 'talk.html';
    }

    document.addEventListener('DOMContentLoaded', () => {
      populateAgeOptions();
      populateDiagnosisOptions();
      playTTS('ì•ˆë…•í•˜ì„¸ìš”! CBT ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
    });
  </script>
</body>
</html>
```
